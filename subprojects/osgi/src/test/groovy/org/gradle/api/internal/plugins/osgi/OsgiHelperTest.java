package org.gradle.api.internal.plugins.osgi;

import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class OsgiHelperTest {

    @Test
    public void testVersions() {

        OsgiHelper underTest = new OsgiHelper();

        for( String[] testcase : versionTestCases ) {
            String input = testcase[0];
            String actual = underTest.getVersion(input);
            String expected = testcase[1];
            assertEquals( "Checking version [" + input + "], expected:[" + expected + "], actual: [" + actual + "]", expected, actual );
        }
    }

    private static final String[][] versionTestCases = {
            { "1", "1" },
            { "1.2", "1.2" },
            { "1.2.3", "1.2.3" },
            { "1.2.3.4", "1.2.3.4" },
            { "1.2.3.4.5", "1.2.3.4_5" },
            { "1.2.3.4.5.6", "1.2.3.4_5_6" },
            { "1.2.3.4.5.6.7", "1.2.3.4_5_6_7" },
            { "1.2.3.4.5-6.7", "1.2.3.4_5-6_7" },
            { "1.2.3.4-5.6.7", "1.2.3.4-5_6_7" },
            { "1.2.3.ABC", "1.2.3.ABC" },
            { "1.2.ABC", "1.2.0.ABC" },
            { "1.ABC", "1.0.0.ABC" },
            { "1-ABC", "1.0.0.ABC" },
            { "1-20110303", "1.0.0.20110303" },
            { "1.2-20110303", "1.2.0.20110303" },
            { "1.2.3-20110303", "1.2.3.20110303" },
            { "1_20110303", "1.0.0.20110303" },
            { "1.2_20110303", "1.2.0.20110303" },
            { "1.2.3_20110303", "1.2.3.20110303" },
            { "1*20110303", "1.0.0.20110303" },
            { "1.2*20110303", "1.2.0.20110303" },
            { "1.2.3*20110303", "1.2.3.20110303" },
            { "1@20110303", "1.0.0.20110303" },
            { "1.2@20110303", "1.2.0.20110303" },
            { "1.2.3@20110303", "1.2.3.20110303" },
            { "1!20110303", "1.0.0.20110303" },
            { "1.2!20110303", "1.2.0.20110303" },
            { "1.2.3!20110303", "1.2.3.20110303" },
            { "1%20110303", "1.0.0.20110303" },
            { "1.2%20110303", "1.2.0.20110303" },
            { "1.2.3%20110303", "1.2.3.20110303" },
            { "1^20110303", "1.0.0.20110303" },
            { "1.2^20110303", "1.2.0.20110303" },
            { "1.2.3^20110303", "1.2.3.20110303" },
            { "1/20110303", "1.0.0.20110303" },
            { "1.2/20110303", "1.2.0.20110303" },
            { "1.2.3/20110303", "1.2.3.20110303" },
            { "1-20.11$03@0#3", "1.0.0.20_11_03_0_3" },

            { "100000", "100000" }
    };
}
