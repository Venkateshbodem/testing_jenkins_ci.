apply plugin: 'cpp'

sources {
    exe {
        cpp(CppSourceSet)
    }
    lib {
        cpp(CppSourceSet)
    }
}
// START SNIPPET flavors
model {
    flavors {
        english
        french
    }
}

libraries {
    hello {
        binaries.all {
            if (flavor == flavors.french) {
                cppCompiler.define "FRENCH"
            }
        }
        source sources.lib
    }
}
// END SNIPPET flavors
binaries.withType(SharedLibraryBinarySpec) {
    cppCompiler.define "DLL_EXPORT"
}

executables {
    main {
        source sources.exe
        binaries.all {
            lib libraries.hello
        }
    }
}