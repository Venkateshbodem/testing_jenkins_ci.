// Copyright 2023 the original author or authors.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[settings_file_basics]]
= Settings File Basics

The settings file is the *entry point* of every Gradle project.

image::gradle-basic-3.png[]

The _settings file_ has two primary purposes:

1. Register subprojects which will be part of the build process.
2. Add libraries to your build.

Gradle supports single and multi-project builds.

- For single-project builds, the settings file is optional.
- For multi-project builds, the settings file is mandatory and declares all subprojects.

[[sec:settings_script]]
== Settings script

The settings file is a script.
It is either a `settings.gradle` file written in Groovy or a `settings.gradle.kts` file written in Kotlin.

The link:{groovyDslPath}/index.html[Groovy DSL^] and the link:{kotlinDslPath}/index.html[Kotlin DSL^] are the only accepted languages for Gradle scripts.

The settings file is typically found in the root directory of the project.

Let's take a look at an example and break it down:

====
[.multi-language-sample]
=====
.settings.gradle.kts
[source,kotlin]
----
pluginManagement {                                          // <1>
    repositories {
        gradlePluginPortal()
        google()
    }
    includeBuild("../build-logic")
}

plugins {                                                   // <2>
    id("org.gradle.toolchains.plugin") version "0.6.0"
}

rootProject.name = "root-project"                           // <3>

dependencyResolutionManagement {                            // <4>
    repositories {
        mavenCentral()
    }
    includeBuild("../other-project")
}

include("sub-project-a")                                    // <5>
include("sub-project-b")
include("sub-project-c")
----
<1> Locate plugins.
<2> Apply shared plugins.
<3> Name the root project.
<4> Manage dependencies.
<5> Add subprojects to the build.
=====

[.multi-language-sample]
=====
.settings.gradle
[source,groovy]
----
pluginManagement {                                          // <1>
    repositories {
        gradlePluginPortal()
        google()
    }
    includeBuild('../build-logic')
}

plugins {                                                   // <2>
    id 'org.gradle.toolchains.plugin' version '0.6.0'
}

rootProject.name = 'root-project'                           // <3>

dependencyResolutionManagement {                            // <4>
    repositories {
        mavenCentral()
    }
    includeBuild('../other-project')
}

include('sub-project-a')                                    // <5>
include('sub-project-b')
include('sub-project-c')
----
<1> Locate plugins.
<2> Apply shared plugins.
<3> Name the root project.
<4> Manage dependencies and components.
<5> Add subprojects to the build.
=====
====

=== 1. Locate plugins

The settings file can optionally define the plugins your project uses, including binary repositories such as the Gradle Plugin Portal or other Gradle builds:

[source]
----
pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
    }
    includeBuild("../my-build-logic")
}
----

=== 2. Define shared plugins

The settings file can optionally define the plugins which are used as shared configuration in the build:

[source]
----
plugins {
    id("org.gradle.toolchains.fake") version "0.6.0"
}
----

=== 3. Define the project name

The settings file defines your project name:

[source]
----
rootProject.name = "root-project"
----

There is only one root per project.

=== 4. Define dependency location and components

The settings file can optionally define the locations of components your project relies on such as binary repositories like Maven Central and/or other Gradle builds:

[source]
----
dependencyResolutionManagement {
    repositories {
        mavenCentral()
    }
    includeBuild("../other-project")
}
----

=== 5. Define subprojects

The settings file defines the structure of the project by including the subprojects:

[source]
----
include("app")
include("business-logic")
include("data-model")
----
