// Copyright (C) 2023 Gradle, Inc.
//
// Licensed under the Creative Commons Attribution-Noncommercial-ShareAlike 4.0 International License.;
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      https://creativecommons.org/licenses/by-nc-sa/4.0/
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

[[command_line_interface]]
= Command-Line Interface Basics

The command-line interface is the **primary method of interacting with Gradle**.

image::gradle-basic-2.png[]

Use of the <<gradle_wrapper.adoc#gradle_wrapper, Gradle Wrapper>> is highly encouraged.

Substitute `./gradlew` (in macOS / Linux) or `gradlew.bat` (in Windows) for `gradle` in the following examples.

Executing Gradle on the command line conforms to the following structure:

----
gradle [taskName...] [--option-name...]
----

Options are allowed _before_ and _after_ task names.

----
gradle [--option-name...] [taskName...]
----

If multiple tasks are specified, you should separate them with a space.

----
gradle [taskName1 taskName2...] [--option-name...]
----

Options that accept values can be specified with or without `=` between the option and argument. The use of `=` is recommended.

----
gradle [...] --console=plain
----

Options that enable behavior have long-form options with inverses specified with `--no-`. The following are opposites.

----
gradle [...] --build-cache
gradle [...] --no-build-cache
----

Many long-form options have short-option equivalents. The following are equivalent:

----
gradle --help
gradle -h
----

== Command-line usage

The following sections describe the use of the Gradle command-line interface.
Some plugins also add their own command line options.

[[sec:command_line_executing_tasks]]
=== Executing tasks
To execute a task called `myTask` on the root project, type:

----
$ gradle :myTask
----

This will run the single `myTask` and all of its <<using_tasks.adoc#sec:task_dependencies,dependencies>>.

[[sec:disambiguate_task_options_from_built_in_options]]
=== Specify options for tasks
To pass an option to a task, prefix the option name with `--` after the task name:

----
$ gradle exampleTask --exampleOption=exampleValue
----

==== Disambiguate task options from built-in options
Gradle does not prevent tasks from registering options that conflict with Gradle's built-in options, like `--profile` or `--help`.

You can fix conflicting task options from Gradle's built-in options with a `--` delimiter before the task name in the command:

----
$ gradle [--built-in-option-name...] -- [taskName...] [--task-option-name...]
----

Consider a task named `mytask` that accepts an option named `profile`:

- In `gradle mytask --profile`, Gradle accepts `--profile` as the built-in Gradle option.

- In `gradle \-- mytask --profile=value`, Gradle passes `--profile` as a task option.

[[executing_tasks_in_multi_project_builds]]
=== Executing tasks in multi-project builds
In a <<intro_multi_project_builds.adoc#intro_multi_project_builds, multi-project build>>, subproject tasks can be executed with `:` separating the subproject name and task name.

The following are equivalent when _run from the root project_:

----
$ gradle :subproject:taskName
----

----
$ gradle subproject:taskName
----

You can also run a task for _all_ subprojects using a task _selector_ that consists of only the task name.

The following command runs the `test` task for all subprojects when invoked from the _root project directory_:

----
$ gradle test
----

[NOTE]
====
Some task selectors, like `help` or `dependencies`, will only run the task on the project they are invoked on and not all the subprojects.
====

When invoking Gradle from within a subproject, the project name should be omitted:

----
$ cd subproject
----
----
$ gradle taskName
----

[TIP]
====
When executing the Gradle Wrapper from a subproject directory, reference `gradlew` relatively. For example: `../gradlew taskName`.
====

[[sec:command_line_logging]]
== Logging options

=== Setting log level
You can customize the <<logging.adoc#logging,verbosity>> of Gradle logging with the following options, ordered from least verbose to most verbose.

`-Dorg.gradle.logging.level=(quiet,warn,lifecycle,info,debug)`::
Set logging level via Gradle properties.

`-q`, `--quiet`::
Log errors only.

`-w`, `--warn`::
Set log level to warn.

`-i`, `--info`::
Set log level to info.

`-d`, `--debug`::
Log in debug mode (includes normal stacktrace).

_Lifecycle_ is the default log level.

[[sec:command_line_customizing_log_format]]
=== Customizing log format
You can control the use of rich output (colors and font variants) by specifying the console mode in the following ways:

`-Dorg.gradle.console=(auto,plain,rich,verbose)`::
Specify console mode via Gradle properties. Different modes are described immediately below.

`--console=(auto,plain,rich,verbose)`::
Specifies which type of console output to generate.
+
Set to `plain` to generate plain text only. This option disables all color and other rich output in the console output. This is the default when Gradle is _not_ attached to a terminal.
+
Set to `auto` (the default) to enable color and other rich output in the console output when the build process is attached to a console or to generate plain text only when not attached to a console. _This is the default when Gradle is attached to a terminal._
+
Set to `rich` to enable color and other rich output in the console output, regardless of whether the build process is not attached to a console. When not attached to a console, the build output will use ANSI control characters to generate the rich output.
+
Set to `verbose` to enable color and other rich output like `rich` with output task names and outcomes at the lifecycle log level, (as is done by default in Gradle 3.5 and earlier).

[[sec:command_line_warnings]]
=== Showing or hiding warnings
By default, Gradle won't display all warnings (e.g. deprecation warnings). Instead, Gradle will collect them and render a summary at the end of the build like:

----
Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.
----

You can control the verbosity of warnings on the console with the following options:

`-Dorg.gradle.warning.mode=(all,fail,none,summary)`::
Specify warning mode via <<build_environment.adoc#sec:gradle_configuration_properties, Gradle properties>>. Different modes are described immediately below.

`--warning-mode=(all,fail,none,summary)`::
Specifies how to log warnings. Default is `summary`.
+
Set to `all` to log all warnings.
+
Set to `fail` to log all warnings and fail the build if there are any warnings.
+
Set to `summary` to suppress all warnings and log a summary at the end of the build.
+
Set to `none` to suppress all warnings, including the summary at the end of the build.

[[sec:rich_console]]
=== Rich console
Gradle's rich console displays extra information while builds are running.

image::rich-cli.png[alt="Gradle Rich Console"]

Features:

* Progress bar and timer visually describe the overall status
* Parallel work-in-progress lines below describe what is happening now
* Colors and fonts are used to highlight significant output and errors


[[sec:excluding_tasks_from_the_command_line]]
[[sec:rerun_tasks]]
[[sec:continue_build_on_failure]]
[[sec:name_abbreviation]]
[[sec:command_line_project_reporting]]
[[sec:listing_tasks]]
[[sec:show_task_details]]
[[sec:listing_project_dependencies]]
[[sec:listing_properties]]
[[sec:command_line_completion]]
[[sec:command_line_debugging]]
[[sec:command_line_performance]]
[[sec:command_line_execution_options]]
[[sec:dependency_verification_options]]
[[sec:environment_options]]
[[sec:task_options]]
[[sec:builtin_task_options]]
[[sec:command_line_bootstrapping_projects]]
[[sec:continuous_build]]
[[continuous_build_limitations]]
[[sec:continuous_build_missing_files]]
[[sec:continuous_build_untracked]]
[[sec:continuous_build_project_dir]]
[[sec:build_cycles]]
[[sec:changes_to_symbolic_links]]
[[sec:changes_to_build_logic_are_not_considered]]

[.text-right]
**Next Step:** <<settings_file_basics.adoc#settings_file_basics,Learn about the Settings file>> >>
